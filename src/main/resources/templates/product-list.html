<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <th:block th:replace="~{layout/top :: top}"></th:block>
    </head>
    <body>
        <!-- Message for success insert -->
        <div th:if="${message}">
            <p th:text="${message}"></p>
        </div>
        <!-- Product List -->
        <h1>Scrum Board Admin</h1>
        <div class="filter-form">
            <form action="/price-range" method="get">
                <label>Lowest Price: </label>
                <input type="number" step="0.01" name="minPrice" th:value="${minPrice}" placeholder="0"/>
                <label>Highest Price: </label>
                <input type="number" step="0.01" name="maxPrice" th:value="${maxPrice}" placeholder="1000000"/>
                <button type="submit">filter</button>
            </form>
            <a href="/">Clear Filters</a>
        </div>

        <!-- Product Table -->
        <table>
            <thead>
            <tr>
                <th>ID</th>
                <th>name</th>
                <th>price</th>
                <th>describe</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="product : ${products}"> <!-- Use th:object to bind the Product object and th:field to map the form field. -->
                <td th:text="${product.id}"></td>
                <td th:text="${product.name}"></td>
                <td th:text="${product.price}"></td>
                <td th:text="${product.description}"></td>
                <td><a th:href="@{/edit/{id}(id=${product.id})}">Edit</a> | <a th:href="@{/delete/{id}(id=${product.id})}" onclick="return confirm('Confirm deletion?')">Delete</a></td>
            </tr>
            <tr th:if="${products.isEmpty()}">
                <td colspan="4">No product information</td>
            </tr>
            </tbody>
        </table>

        <!-- Page navigation -->
        <div class="pagination" th:if="${totalPages > 1}">
            <a th:href="@{/(page=${currentPage - 1})}" th:if="${currentPage > 0}">&laquo; Previous page</a>
            <span th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
                    <a th:href="@{/(page=${i})}" th:class="${i == currentPage} ? 'active'" th:text="${i + 1}"></a>
                </span>
            <a th:href="@{/(page=${currentPage + 1})}" th:if="${currentPage < totalPages - 1}">Next Page &raquo;</a>
        </div>
        <!-- Add product link -->
        <a href="/add">New Products</a>
        <!-- Insert footer.html -->
        <footer th:insert="~{layout/footer :: footer}"></footer>
    </body>
</html>
