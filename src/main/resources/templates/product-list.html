<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Product list</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .pagination { margin-top: 20px; }
        .pagination a { margin: 0 5px; text-decoration: none; }
        .pagination a.active { font-weight: bold; }
        .filter-form { margin-bottom: 20px; }
    </style>
</head>
<body>
<h1>Product List</h1>

<!-- Product List -->
<div class="filter-form">
    <form action="/price-range" method="get">
        <label>Lowest Price: </label>
        <input type="number" step="0.01" name="minPrice" th:value="${minPrice}" placeholder="0"/>
        <label>Highest Price: </label>
        <input type="number" step="0.01" name="maxPrice" th:value="${maxPrice}" placeholder="1000000"/>
        <button type="submit">filter</button>
    </form>
    <a href="/">Clear Filters</a>
</div>

<!-- Product Table -->
<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>name</th>
        <th>price</th>
        <th>describe</th>
        <th></th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="product : ${products}"> <!-- Use th:object to bind the Product object and th:field to map the form field. -->
        <td th:text="${product.id}"></td>
        <td th:text="${product.name}"></td>
        <td th:text="${product.price}"></td>
        <td th:text="${product.description}"></td>
        <td><a th:href="@{/edit/{id}(id=${product.id})}">Edit</a> | <a th:href="@{/delete/{id}(id=${product.id})}" onclick="return confirm('Confirm deletion?')">Delete</a></td>
    </tr>
    <tr th:if="${products.isEmpty()}">
        <td colspan="4">No product information</td>
    </tr>
    </tbody>
</table>

<!-- Page navigation -->
<div class="pagination" th:if="${totalPages > 1}">
    <a th:href="@{/(page=${currentPage - 1})}" th:if="${currentPage > 0}">&laquo; Previous page</a>
    <span th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
            <a th:href="@{/(page=${i})}" th:class="${i == currentPage} ? 'active'" th:text="${i + 1}"></a>
        </span>
    <a th:href="@{/(page=${currentPage + 1})}" th:if="${currentPage < totalPages - 1}">Next Page &raquo;</a>
</div>

<!-- Add product link -->
<a href="/add">New Products</a>
</body>
</html>